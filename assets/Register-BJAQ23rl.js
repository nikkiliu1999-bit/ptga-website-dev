import{_ as D,u as L,r as o,p as S,q as z,c as u,a as s,F as B,d as I,b as c,w as T,e as w,v as b,n,h as r,f as A,g as k,i as F,j,k as E,t as Z,l as G,o as p,m as H}from"./index-BluKeNpR.js";const J={class:"login-page"},K={class:"bubbles"},O={class:"login-card"},Q={class:"card-body"},W={class:"input-group"},X={class:"input-group"},Y={key:0,class:"password-requirements"},$={class:"input-group"},ee={key:1,class:"password-mismatch"},se={class:"terms-agreement"},ae=["disabled"],te={key:0},le={key:1,class:"loading"},oe={class:"register-link"},ie={key:0,class:"error-message"},ne={__name:"Register",setup(re){const M=G(),{register:N,loading:x}=L(),y=o(""),a=o(""),v=o(""),f=o(!1),i=o(""),m=o(!1),h=o(!1),g=o(!1),_=o(!1),V=o(!1),P=()=>{_.value=a.value.length>0,m.value=/[a-z]/.test(a.value),h.value=/[A-Z]/.test(a.value),g.value=/[0-9]/.test(a.value),q()},q=()=>{V.value=v.value.length>0&&a.value!==v.value},C=S(()=>a.value.length>=6&&m.value&&h.value&&g.value&&a.value===v.value);z(a,P);const R=t=>{const d=[{width:"40px",height:"40px",left:"10%",duration:"8s",delay:"0s"},{width:"20px",height:"20px",left:"20%",duration:"5s",delay:"1s"},{width:"50px",height:"50px",left:"35%",duration:"7s",delay:"2s"},{width:"80px",height:"80px",left:"50%",duration:"11s",delay:"0s"},{width:"35px",height:"35px",left:"55%",duration:"6s",delay:"1s"},{width:"45px",height:"45px",left:"65%",duration:"8s",delay:"3s"},{width:"90px",height:"90px",left:"70%",duration:"12s",delay:"2s"},{width:"25px",height:"25px",left:"80%",duration:"6s",delay:"2s"},{width:"15px",height:"15px",left:"70%",duration:"5s",delay:"1s"},{width:"90px",height:"90px",left:"25%",duration:"10s",delay:"4s"}][t-1];return{width:d.width,height:d.height,left:d.left,animationDuration:d.duration,animationDelay:d.delay}},U=async()=>{if(i.value="",!C.value){i.value="密码至少6位，须至少包含1位大写字母，1位小写字母，1位数字";return}if(!f.value){i.value="请同意服务条款和隐私政策";return}try{await N(y.value,a.value),alert("注册成功！请检查您的邮箱以确认账户"),M.push({name:"Login"})}catch(t){t.message.includes("already been registered")||t.message.includes("already exists")||t.message.includes("duplicate key value")?i.value="该邮箱已被注册":t.message.includes("Password should be at least 6 characters")||t.message.includes("Password should contain at least one character of each")?i.value="密码至少6位，须至少包含1位大写字母，1位小写字母，1位数字":i.value=t.message||"注册失败，请重试",console.error("注册失败:",t)}};return(t,e)=>{const d=E("router-link");return p(),u("div",J,[s("div",K,[(p(),u(B,null,I(10,l=>s("div",{key:l,class:"bubble",style:H(R(l))},null,4)),64))]),s("div",O,[e[16]||(e[16]=s("div",{class:"card-header"},[s("div",{class:"logo"},[s("i",{class:"fas fa-user-plus"})]),s("h2",null,"创建新账户"),s("p",null,"填写以下信息完成注册")],-1)),s("div",Q,[s("form",{onSubmit:T(U,["prevent"])},[s("div",W,[e[4]||(e[4]=s("i",{class:"fas fa-envelope"},null,-1)),w(s("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=l=>y.value=l),name:"email",type:"email",autocomplete:"email",required:"",placeholder:"邮箱地址"},null,512),[[b,y.value]])]),s("div",X,[e[5]||(e[5]=s("i",{class:"fas fa-lock"},null,-1)),w(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=l=>a.value=l),name:"password",type:"password",autocomplete:"new-password",required:"",placeholder:"密码",onInput:P},null,544),[[b,a.value]])]),_.value?(p(),u("div",Y,[s("p",{class:n({valid:a.value.length>=6})},[s("i",{class:n(a.value.length>=6?"fas fa-check text-green-500":"fas fa-times text-red-500")},null,2),e[6]||(e[6]=r(" 至少6位字符 ",-1))],2),s("p",{class:n({valid:m.value})},[s("i",{class:n(m.value?"fas fa-check text-green-500":"fas fa-times text-red-500")},null,2),e[7]||(e[7]=r(" 至少1位小写字母 ",-1))],2),s("p",{class:n({valid:h.value})},[s("i",{class:n(h.value?"fas fa-check text-green-500":"fas fa-times text-red-500")},null,2),e[8]||(e[8]=r(" 至少1位大写字母 ",-1))],2),s("p",{class:n({valid:g.value})},[s("i",{class:n(g.value?"fas fa-check text-green-500":"fas fa-times text-red-500")},null,2),e[9]||(e[9]=r(" 至少1位数字 ",-1))],2)])):c("",!0),s("div",$,[e[10]||(e[10]=s("i",{class:"fas fa-lock-open"},null,-1)),w(s("input",{id:"confirm-password","onUpdate:modelValue":e[2]||(e[2]=l=>v.value=l),name:"confirm-password",type:"password",autocomplete:"new-password",required:"",placeholder:"确认密码",onInput:q},null,544),[[b,v.value]])]),V.value?(p(),u("p",ee," 两次输入的密码不一致 ")):c("",!0),s("div",se,[w(s("input",{id:"terms","onUpdate:modelValue":e[3]||(e[3]=l=>f.value=l),name:"terms",type:"checkbox",required:""},null,512),[[A,f.value]]),e[11]||(e[11]=s("label",{for:"terms"}," 我同意服务条款和隐私政策 ",-1))]),s("button",{type:"submit",disabled:k(x)||!C.value||!f.value,class:"login-btn"},[k(x)?c("",!0):(p(),u("span",te,"注册")),k(x)?(p(),u("span",le,e[12]||(e[12]=[s("span",{class:"spinner"},null,-1),r(" 注册中... ",-1)]))):c("",!0)],8,ae),s("div",oe,[e[14]||(e[14]=r(" 已有账号? ",-1)),F(d,{to:{name:"Login"}},{default:j(()=>e[13]||(e[13]=[r("立即登录",-1)])),_:1,__:[13]})])],32),i.value?(p(),u("div",ie,[e[15]||(e[15]=s("i",{class:"fas fa-exclamation-circle"},null,-1)),r(" "+Z(i.value),1)])):c("",!0)])])])}}},ue=D(ne,[["__scopeId","data-v-a64c20f7"]]);export{ue as default};
